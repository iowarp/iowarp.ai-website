"use strict";(globalThis.webpackChunkiowarp_site=globalThis.webpackChunkiowarp_site||[]).push([[462],{6660:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"deployment/configuration","title":"Configuration Reference","description":"This document describes how to configure IOWarp deployments.","source":"@site/docs/deployment/configuration.md","sourceDirName":"deployment","slug":"/deployment/configuration","permalink":"/docs/deployment/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/iowarp/iowarp.github.io/tree/main/docs/deployment/configuration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HPC Cluster Deployment","permalink":"/docs/deployment/hpc-cluster"},"next":{"title":"Performance Tuning","permalink":"/docs/deployment/performance"}}');var t=r(4848),s=r(8453);const o={},c="Configuration Reference",d={},l=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Configuration File Format",id:"configuration-file-format",level:2},{value:"1. Runtime Configuration (Top-Level)",id:"1-runtime-configuration-top-level",level:3},{value:"2. CTE Compose Configuration",id:"2-cte-compose-configuration",level:3},{value:"Runtime Configuration Parameters",id:"runtime-configuration-parameters",level:2},{value:"Workers (<code>workers</code>)",id:"workers-workers",level:3},{value:"Memory (<code>memory</code>)",id:"memory-memory",level:3},{value:"Networking (<code>networking</code>)",id:"networking-networking",level:3},{value:"Logging and Runtime (Optional)",id:"logging-and-runtime-optional",level:3},{value:"CTE Configuration Parameters",id:"cte-configuration-parameters",level:2},{value:"Storage Devices (<code>storage</code>)",id:"storage-devices-storage",level:3},{value:"Data Placement Engine (<code>dpe</code>)",id:"data-placement-engine-dpe",level:3},{value:"Targets (<code>targets</code>)",id:"targets-targets",level:3},{value:"Performance (<code>performance</code>)",id:"performance-performance",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Single-Node Development",id:"single-node-development",level:3},{value:"Multi-Node Production (4 nodes)",id:"multi-node-production-4-nodes",level:3},{value:"Multi-Tier Storage with RAM Cache",id:"multi-tier-storage-with-ram-cache",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Docker Deployment",id:"docker-deployment",level:2},{value:"Docker Compose Example",id:"docker-compose-example",level:3},{value:"Multi-Node Deployment",id:"multi-node-deployment",level:3},{value:"Deployment Steps",id:"deployment-steps",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"configuration-reference",children:"Configuration Reference"})}),"\n",(0,t.jsx)(n.p,{children:"This document describes how to configure IOWarp deployments."}),"\n",(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#quick-start",children:"Quick Start"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#configuration-file-format",children:"Configuration File Format"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#runtime-configuration-parameters",children:"Runtime Configuration Parameters"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#cte-configuration-parameters",children:"CTE Configuration Parameters"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#complete-examples",children:"Complete Examples"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#environment-variables",children:"Environment Variables"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#docker-deployment",children:"Docker Deployment"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"CTE runs on the IoWarp Runtime (Chimaera distributed task execution framework). A single YAML configuration file configures both:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Runtime Infrastructure"}),": Workers, memory, networking, logging"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CTE ChiMod"}),": Storage devices, data placement, performance tuning"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Configuration is specified via the ",(0,t.jsx)(n.code,{children:"WRP_RUNTIME_CONF"})," environment variable pointing to a YAML file."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Basic Deployment"})," (compose section creates CTE automatically):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Set configuration file\nexport WRP_RUNTIME_CONF=/etc/iowarp/config.yaml\n\n# Start runtime (automatically creates CTE from compose section)\nchimaera_start_runtime\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Alternative: Manual Pool Creation"})," (using chimaera_compose utility):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Start runtime first\nexport WRP_RUNTIME_CONF=/etc/iowarp/config.yaml\nchimaera_start_runtime &\n\n# Wait for runtime to initialize\nsleep 2\n\n# Create CTE pool from compose configuration\nchimaera_compose /etc/iowarp/config.yaml\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"chimaera_compose"})," utility is useful for:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Setting up pools after runtime initialization"}),"\n",(0,t.jsx)(n.li,{children:"Scripted deployment workflows"}),"\n",(0,t.jsx)(n.li,{children:"Testing pool configurations"}),"\n",(0,t.jsx)(n.li,{children:"Separating runtime startup from pool creation"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Minimal Configuration"})," (",(0,t.jsx)(n.code,{children:"config.yaml"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'workers:\n  sched_threads: 4\n  slow_threads: 4\n\nmemory:\n  main_segment_size: 1GB\n  client_data_segment_size: 512MB\n  runtime_data_segment_size: 512MB\n\nnetworking:\n  port: 5555\n\ncompose:\n  - mod_name: wrp_cte_core\n    pool_name: cte_main\n    pool_query: dynamic\n    pool_id: "512.0"  # Default CTE pool ID\n    storage:\n      - path: /tmp/cte_storage\n        bdev_type: file\n        capacity_limit: 10GB\n    dpe:\n      dpe_type: max_bw\n  - mod_name: wrp_cae_core\n    pool_name: cae_main\n    pool_query: local\n    pool_id: "400.0"\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"configuration-file-format",children:"Configuration File Format"}),"\n",(0,t.jsx)(n.p,{children:"The configuration file has two main parts:"}),"\n",(0,t.jsx)(n.h3,{id:"1-runtime-configuration-top-level",children:"1. Runtime Configuration (Top-Level)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# Worker threads\nworkers:\n  sched_threads: 8           # Fast task workers (< 50us)\n  slow_threads: 8            # Slow task workers (>= 50us)\n\n# Shared memory segments\nmemory:\n  main_segment_size: 4GB\n  client_data_segment_size: 2GB\n  runtime_data_segment_size: 2GB\n\n# Networking for distributed mode\nnetworking:\n  port: 5555\n  neighborhood_size: 32\n  hostfile: /etc/iowarp/hostfile  # Optional: for multi-node\n\n# Logging (optional, can omit for defaults)\nlogging:\n  level: info\n  file: /tmp/chimaera.log\n\n# Runtime settings (optional, can omit for defaults)\nruntime:\n  stack_size: 65536\n  queue_depth: 10000\n  lane_map_policy: round_robin\n  heartbeat_interval: 1000\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-cte-compose-configuration",children:"2. CTE Compose Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The CTE ChiMod is created via the ",(0,t.jsx)(n.code,{children:"compose"})," section. The default pool ID for CTE is ",(0,t.jsx)(n.code,{children:"512.0"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'compose:\n  - mod_name: wrp_cte_core\n    pool_name: cte_main\n    pool_query: dynamic\n    pool_id: "512.0"  # Default CTE pool ID (recommended)\n\n    # CTE-specific configuration\n    storage:\n      - path: /mnt/storage1\n        bdev_type: file\n        capacity_limit: 100GB\n        score: -1.0              # -1.0 = auto, 0.0-1.0 = manual\n      - path: /mnt/storage2\n        bdev_type: file\n        capacity_limit: 100GB\n        score: -1.0\n\n    dpe:\n      dpe_type: max_bw           # Options: random, round_robin, max_bw\n\n    targets:\n      neighborhood: 4\n      default_target_timeout_ms: 30000\n      poll_period_ms: 5000\n\n    performance:\n      target_stat_interval_ms: 5000\n      max_concurrent_operations: 64\n      score_threshold: 0.7\n      score_difference_threshold: 0.05\n\n  - mod_name: wrp_cae_core\n    pool_name: cae_main\n    pool_query: local\n    pool_id: "400.0"\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"runtime-configuration-parameters",children:"Runtime Configuration Parameters"}),"\n",(0,t.jsxs)(n.h3,{id:"workers-workers",children:["Workers (",(0,t.jsx)(n.code,{children:"workers"}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sched_threads"})}),(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"Scheduler workers for fast tasks (< 50us)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slow_threads"})}),(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"Workers for slow tasks (>= 50us)"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Recommendation"}),": Set total threads = CPU cores (e.g., 8+8 for 16-core system)"]}),"\n",(0,t.jsxs)(n.h3,{id:"memory-memory",children:["Memory (",(0,t.jsx)(n.code,{children:"memory"}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"main_segment_size"})}),(0,t.jsx)(n.td,{children:"1GB"}),(0,t.jsx)(n.td,{children:"Task metadata and control structures"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"client_data_segment_size"})}),(0,t.jsx)(n.td,{children:"512MB"}),(0,t.jsx)(n.td,{children:"Application data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"runtime_data_segment_size"})}),(0,t.jsx)(n.td,{children:"512MB"}),(0,t.jsx)(n.td,{children:"Runtime internal state"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Size format"}),": ",(0,t.jsx)(n.code,{children:"1GB"}),", ",(0,t.jsx)(n.code,{children:"512MB"}),", ",(0,t.jsx)(n.code,{children:"64K"}),", or bytes (",(0,t.jsx)(n.code,{children:"1073741824"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Docker"}),": Set ",(0,t.jsx)(n.code,{children:"shm_size"})," >= sum of segments + 20% overhead"]}),"\n",(0,t.jsxs)(n.h3,{id:"networking-networking",children:["Networking (",(0,t.jsx)(n.code,{children:"networking"}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"port"})}),(0,t.jsx)(n.td,{children:"5555"}),(0,t.jsx)(n.td,{children:"ZeroMQ port (must match across cluster)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"neighborhood_size"})}),(0,t.jsx)(n.td,{children:"32"}),(0,t.jsx)(n.td,{children:"Max nodes queried for range queries"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"hostfile"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Path to file with cluster IPs (one per line)"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Hostfile format"})," (",(0,t.jsx)(n.code,{children:"/etc/iowarp/hostfile"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"172.20.0.10\n172.20.0.11\n172.20.0.12\n"})}),"\n",(0,t.jsx)(n.h3,{id:"logging-and-runtime-optional",children:"Logging and Runtime (Optional)"}),"\n",(0,t.jsxs)(n.p,{children:["These sections can be omitted to use defaults. See ",(0,t.jsx)(n.code,{children:"docs/chimaera/deployment.md"})," for details."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cte-configuration-parameters",children:"CTE Configuration Parameters"}),"\n",(0,t.jsxs)(n.p,{children:["All CTE parameters are specified within the compose entry for ",(0,t.jsx)(n.code,{children:"wrp_cte_core"}),"."]}),"\n",(0,t.jsxs)(n.h3,{id:"storage-devices-storage",children:["Storage Devices (",(0,t.jsx)(n.code,{children:"storage"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"Array of storage targets for blob storage."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"path"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Directory path for block device"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bdev_type"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsxs)(n.td,{children:["Device type: ",(0,t.jsx)(n.code,{children:"file"})," or ",(0,t.jsx)(n.code,{children:"ram"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"capacity_limit"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsxs)(n.td,{children:["Capacity (e.g., ",(0,t.jsx)(n.code,{children:"10GB"}),", ",(0,t.jsx)(n.code,{children:"1TB"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"score"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Manual score 0.0-1.0, or -1.0 for auto (default: -1.0)"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'storage:\n  # RAM-based cache storage (use ram:: prefix)\n  - path: "ram::cte_cache"\n    bdev_type: ram\n    capacity_limit: 512MB\n    score: 1.0              # Manual score - fastest tier\n  # File-based storage\n  - path: /mnt/nvme/cte\n    bdev_type: file\n    capacity_limit: 500GB\n    score: 0.9              # Fast storage\n  - path: /mnt/hdd/cte\n    bdev_type: file\n    capacity_limit: 2TB\n    score: 0.3              # Slow storage\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": RAM-based storage requires the ",(0,t.jsx)(n.code,{children:"ram::"})," prefix in the path."]}),"\n",(0,t.jsxs)(n.h3,{id:"data-placement-engine-dpe",children:["Data Placement Engine (",(0,t.jsx)(n.code,{children:"dpe"}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dpe_type"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"max_bw"})}),(0,t.jsxs)(n.td,{children:["Placement algorithm: ",(0,t.jsx)(n.code,{children:"random"}),", ",(0,t.jsx)(n.code,{children:"round_robin"}),", ",(0,t.jsx)(n.code,{children:"max_bw"})]})]})})]}),"\n",(0,t.jsxs)(n.h3,{id:"targets-targets",children:["Targets (",(0,t.jsx)(n.code,{children:"targets"}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"neighborhood"})}),(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"Number of storage targets CTE can buffer to"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"default_target_timeout_ms"})}),(0,t.jsx)(n.td,{children:"30000"}),(0,t.jsx)(n.td,{children:"Timeout for target operations (ms)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"poll_period_ms"})}),(0,t.jsx)(n.td,{children:"5000"}),(0,t.jsx)(n.td,{children:"Period to rescan targets for stats (ms)"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"performance-performance",children:["Performance (",(0,t.jsx)(n.code,{children:"performance"}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"target_stat_interval_ms"})}),(0,t.jsx)(n.td,{children:"5000"}),(0,t.jsx)(n.td,{children:"Interval for updating target stats (ms)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"max_concurrent_operations"})}),(0,t.jsx)(n.td,{children:"64"}),(0,t.jsx)(n.td,{children:"Max concurrent I/O operations"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"score_threshold"})}),(0,t.jsx)(n.td,{children:"0.7"}),(0,t.jsx)(n.td,{children:"Threshold for blob reorganization (0.0-1.0)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"score_difference_threshold"})}),(0,t.jsx)(n.td,{children:"0.05"}),(0,t.jsx)(n.td,{children:"Min score difference to trigger reorganization"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Most users can omit the ",(0,t.jsx)(n.code,{children:"performance"})," section to use optimized defaults."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,t.jsx)(n.h3,{id:"single-node-development",children:"Single-Node Development"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'workers:\n  sched_threads: 4\n  slow_threads: 4\n\nmemory:\n  main_segment_size: 1GB\n  client_data_segment_size: 512MB\n  runtime_data_segment_size: 512MB\n\nnetworking:\n  port: 5555\n\ncompose:\n  - mod_name: wrp_cte_core\n    pool_name: cte_main\n    pool_query: dynamic\n    pool_id: "512.0"  # Default CTE pool ID\n    storage:\n      - path: /tmp/cte_storage\n        bdev_type: file\n        capacity_limit: 10GB\n    dpe:\n      dpe_type: max_bw\n'})}),"\n",(0,t.jsx)(n.h3,{id:"multi-node-production-4-nodes",children:"Multi-Node Production (4 nodes)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# Combined Chimaera + CTE Configuration\n# For use with 4-node distributed cluster\n\nworkers:\n  sched_threads: 8\n  slow_threads: 8\n\nmemory:\n  main_segment_size: 4GB\n  client_data_segment_size: 2GB\n  runtime_data_segment_size: 2GB\n\nnetworking:\n  port: 8080\n  neighborhood_size: 32\n  hostfile: /etc/iowarp/hostfile\n\nlogging:\n  level: info\n  file: /var/log/chimaera/chimaera.log\n\nruntime:\n  stack_size: 65536\n  queue_depth: 10000\n  lane_map_policy: round_robin\n  heartbeat_interval: 1000\n\ncompose:\n  - mod_name: wrp_cte_core\n    pool_name: cte_main\n    pool_query: dynamic\n    pool_id: "512.0"  # Default CTE pool ID\n\n    # 4 storage targets across 4 nodes\n    storage:\n      - path: /mnt/hdd1\n        bdev_type: file\n        capacity_limit: 10GB\n        score: 0.25\n      - path: /mnt/hdd2\n        bdev_type: file\n        capacity_limit: 10GB\n        score: 0.25\n      - path: /mnt/hdd3\n        bdev_type: file\n        capacity_limit: 10GB\n        score: 0.25\n      - path: /mnt/hdd4\n        bdev_type: file\n        capacity_limit: 10GB\n        score: 0.25\n\n    dpe:\n      dpe_type: max_bw\n\n    targets:\n      neighborhood: 4\n      default_target_timeout_ms: 30000\n      poll_period_ms: 5000\n\n    performance:\n      target_stat_interval_ms: 5000\n      max_concurrent_operations: 64\n      score_threshold: 0.7\n      score_difference_threshold: 0.05\n'})}),"\n",(0,t.jsx)(n.h3,{id:"multi-tier-storage-with-ram-cache",children:"Multi-Tier Storage with RAM Cache"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'workers:\n  sched_threads: 8\n  slow_threads: 8\n\nmemory:\n  main_segment_size: 4GB\n  client_data_segment_size: 2GB\n  runtime_data_segment_size: 2GB\n\nnetworking:\n  port: 5555\n\ncompose:\n  - mod_name: wrp_cte_core\n    pool_name: cte_main\n    pool_query: dynamic\n    pool_id: "512.0"  # Default CTE pool ID\n    storage:\n      # RAM cache tier (use ram:: prefix)\n      - path: "ram::cte_cache"\n        bdev_type: ram\n        capacity_limit: 512MB\n        score: 1.0\n      # Fast tier - NVMe\n      - path: /mnt/nvme/cte\n        bdev_type: file\n        capacity_limit: 200GB\n        score: 0.9\n      # Medium tier - SSD\n      - path: /mnt/ssd/cte\n        bdev_type: file\n        capacity_limit: 500GB\n        score: 0.7\n      # Slow tier - HDD\n      - path: /mnt/hdd/cte\n        bdev_type: file\n        capacity_limit: 2TB\n        score: 0.3\n    dpe:\n      dpe_type: max_bw\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"WRP_RUNTIME_CONF"})}),(0,t.jsx)(n.td,{children:"Path to configuration YAML"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"export WRP_RUNTIME_CONF=/etc/iowarp/config.yaml"})})]})})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": The runtime does NOT read individual ",(0,t.jsx)(n.code,{children:"CHI_*"})," environment variables. All configuration must be in the YAML file."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"docker-deployment",children:"Docker Deployment"}),"\n",(0,t.jsx)(n.h3,{id:"docker-compose-example",children:"Docker Compose Example"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File"}),": ",(0,t.jsx)(n.code,{children:"docker-compose.yml"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  iowarp-cte:\n    image: iowarp/chimaera-cte:latest\n    container_name: iowarp-cte\n    hostname: cte-node1\n\n    # Shared memory: sum of segments + 20% overhead\n    # 4GB + 2GB + 2GB = 8GB -> use 10GB\n    shm_size: 10gb\n\n    volumes:\n      - ./config.yaml:/etc/iowarp/config.yaml:ro\n      - ./data:/data\n      - ./logs:/var/log/chimaera\n\n    environment:\n      - WRP_RUNTIME_CONF=/etc/iowarp/config.yaml\n\n    ports:\n      - \"5555:5555\"\n\n    networks:\n      cte_net:\n        ipv4_address: 172.20.0.10\n\nnetworks:\n  cte_net:\n    driver: bridge\n    ipam:\n      config:\n        - subnet: 172.20.0.0/24\n"})}),"\n",(0,t.jsx)(n.h3,{id:"multi-node-deployment",children:"Multi-Node Deployment"}),"\n",(0,t.jsx)(n.p,{children:"For a 3-node cluster, create 3 services with different IPs (172.20.0.10, 172.20.0.11, 172.20.0.12) and mount the same config with a hostfile:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Hostfile"})," (",(0,t.jsx)(n.code,{children:"config/hostfile"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"172.20.0.10\n172.20.0.11\n172.20.0.12\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Configuration"})," (",(0,t.jsx)(n.code,{children:"config/config.yaml"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"networking:\n  port: 5555\n  hostfile: /etc/iowarp/hostfile\n# ... rest of configuration\n"})}),"\n",(0,t.jsx)(n.p,{children:"Mount the hostfile in each container:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"volumes:\n  - ./config/hostfile:/etc/iowarp/hostfile:ro\n"})}),"\n",(0,t.jsx)(n.h3,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create directories"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p config data logs\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create configuration"})," (",(0,t.jsx)(n.code,{children:"config/config.yaml"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create storage paths"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p data/cte_storage1 data/cte_storage2\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Start"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verify"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker logs iowarp-cte\ndocker exec iowarp-cte chimaera_pool_list\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Last Updated"}),": 2025-11-09\n",(0,t.jsx)(n.strong,{children:"Version"}),": 2.0.0"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var i=r(6540);const t={},s=i.createContext(t);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);